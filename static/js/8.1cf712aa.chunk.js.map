{"version":3,"sources":["components/CheckoutProduct.js/CheckoutProduct.js","utils/BasketTotal.js","utils/axios.js","pages/Payment/Payment.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_2__","_mui_icons_material__WEBPACK_IMPORTED_MODULE_3__","_redux_actions__WEBPACK_IMPORTED_MODULE_4__","CheckoutProduct","_ref","id","title","image","rating","price","dispatch","useDispatch","a","createElement","className","src","alt","Array","fill","map","_","index","key","role","aria-labelledby","aria-label","onClick","removeFromBasket","d","__webpack_exports__","getBasketTotal","basket","reduce","amount","item","instance","axios","create","baseURL","Payment","_useSelector","useSelector","state","data","user","history","useNavigate","_useState","useState","_useState2","Object","slicedToArray","succeeded","setSucceeded","_useState3","_useState4","processing","setProcessing","_useState5","_useState6","error","setError","_useState7","_useState8","disabled","setDisabled","_useState9","_useState10","setClientSecret","useEffect","asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","method","url","concat","sent","clientSecret","stop","apply","this","arguments","getClientSecret","useStripe","useElements","handleSubmit","_ref2","_callee2","e","_context2","preventDefault","_x","react_default","react_router_dom","to","length","email","img","onSubmit","react_stripe_umd","onChange","empty","message","currency_format_default","renderText","value","decimalScale","displayType","thousandSeparator","prefix"],"mappings":"0FAAA,IAAAA,EAAAC,EAAA,GAAAC,EAAAD,EAAAE,EAAAH,GAAAI,GAAAH,EAAA,KAAAA,EAAA,KAAAI,EAAAJ,EAAA,KAAAK,EAAAL,EAAA,IAsCeM,IAhCS,SAAAC,GAAmC,IAAjCC,EAAiCD,EAAjCC,GAAGC,EAA8BF,EAA9BE,MAAMC,EAAwBH,EAAxBG,MAAMC,EAAkBJ,EAAlBI,OAAOC,EAAWL,EAAXK,MAC1CC,EAASC,cAIX,OACAb,EAAAc,EAAAC,cAAA,OAAKC,UAAU,oBACXhB,EAAAc,EAAAC,cAAA,OAAKE,IAAKR,EAAOS,IAAI,GAAGF,UAAU,2BAClChB,EAAAc,EAAAC,cAAA,OAAKC,UAAU,yBACXhB,EAAAc,EAAAC,cAAA,KAAGC,UAAU,0BACRR,GAELR,EAAAc,EAAAC,cAAA,KAAGC,UAAU,0BACThB,EAAAc,EAAAC,cAAA,mBACAf,EAAAc,EAAAC,cAAA,cAASJ,IAEbX,EAAAc,EAAAC,cAAA,OAAKC,UAAU,2BACdG,MAAMT,GAAQU,OAAOC,IAAI,SAACC,EAAEC,GAAH,OACtBvB,EAAAc,EAAAC,cAAA,KAAGS,IAAKD,GAAOvB,EAAAc,EAAAC,cAAA,QAAMU,KAAK,MAAMC,kBAAgB,GAAGC,aAAW,QAA/C,cAGnB3B,EAAAc,EAAAC,cAAA,UAAQa,QAnBS,WAC1BhB,EAASiB,YAAiBtB,MAmBbP,EAAAc,EAAAC,cAAA,SACIf,EAAAc,EAAAC,cAACZ,EAAA,EAAD,OAFR,iFC3BZJ,EAAA+B,EAAAC,EAAA,sBAAAC,IAAO,IAAMA,EAAe,SAACC,GAAD,OAC1BA,EAAOC,OAAO,SAACC,EAAOC,GAAR,OAAeA,EAAKzB,MAAQwB,GAAO,mMCKpCE,SAJCC,EAAMC,OAAO,CACzBC,QAAQ,yxMC6GGC,UAnGC,WAAM,IAAAC,EACEC,YAAY,SAAAC,GAAK,OAAEA,EAAMC,OAAtCZ,EADWS,EACXT,OAAOa,EADIJ,EACJI,KACRC,EAAQC,cAFIC,GAINpC,cACkBqC,oBAAS,IALrBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAKZK,EALYH,EAAA,GAKFI,EALEJ,EAAA,GAAAK,EAMcN,mBAAS,IANvBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAMZE,EANYD,EAAA,GAMDE,EANCF,EAAA,GAAAG,EAOIV,mBAAS,MAPbW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAOZE,EAPYD,EAAA,GAONE,EAPMF,EAAA,GAAAG,EAQUd,oBAAS,GARnBe,EAAAb,OAAAC,EAAA,EAAAD,CAAAY,EAAA,GAQZE,EARYD,EAAA,GAQHE,EARGF,EAAA,GAAAG,EASkBlB,oBAAS,GAT3BmB,EAAAjB,OAAAC,EAAA,EAAAD,CAAAgB,EAAA,GASCE,GATDD,EAAA,GAAAA,EAAA,IAWnBE,oBAAU,YACe,eAAAjE,EAAA8C,OAAAoB,EAAA,EAAApB,CAAAqB,IAAAC,KAAC,SAAAC,IAAA,IAAAC,EAAA,OAAAH,IAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACG1C,EAAM,CACvB2C,OAAO,OACPC,IAAG,yBAAAC,OAAiD,IAAvBnD,YAAeC,MAH9B,OACZ2C,EADYE,EAAAM,KAKlBd,EAAgBM,EAAS/B,KAAKwC,cALZ,wBAAAP,EAAAQ,SAAAX,MAAD,yBAAArE,EAAAiF,MAAAC,KAAAC,YAAA,EAOrBC,IACF,CAACzD,IACS0D,sBACEC,wBADf,IAIQC,EAAY,eAAAC,EAAA1C,OAAAoB,EAAA,EAAApB,CAAAqB,IAAAC,KAAC,SAAAqB,EAAOC,GAAP,OAAAvB,IAAAI,KAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,OACfgB,EAAEE,iBACFvC,GAAc,GACdJ,GAAa,GACbQ,EAAS,MACTJ,GAAc,GACdZ,EAAQ,WANO,wBAAAkD,EAAAX,SAAAS,MAAD,gBAAAI,GAAA,OAAAL,EAAAP,MAAAC,KAAAC,YAAA,GAYpB,OACEW,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,WACXoF,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,qBACXoF,EAAAtF,EAAAC,cAAA,sBAAcqF,EAAAtF,EAAAC,cAACsF,EAAA,EAAD,CAAMC,GAAG,aAAarE,EAAOsE,OAA7B,WACdH,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,mBACXoF,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,iBACXoF,EAAAtF,EAAAC,cAAA,+BAEJqF,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,mBACXoF,EAAAtF,EAAAC,cAAA,SAAI+B,GAAQA,EAAK0D,OACjBJ,EAAAtF,EAAAC,cAAA,6CACAqF,EAAAtF,EAAAC,cAAA,oCAGRqF,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,mBACXoF,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,iBACXoF,EAAAtF,EAAAC,cAAA,wCAEJqF,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,iBACViB,GAAUA,EAAOZ,IAAI,SAACe,GAAD,OAClBgE,EAAAtF,EAAAC,cAACV,EAAA,EAAD,CAAiBE,GAAI6B,EAAK7B,GAC1BC,MAAO4B,EAAK5B,MACZC,MAAO2B,EAAKqE,IACZ9F,MAAOyB,EAAKzB,MACZD,OAAQ0B,EAAK1B,aAKzB0F,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,mBACXoF,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,iBACXoF,EAAAtF,EAAAC,cAAA,6BAEJqF,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,mBACXoF,EAAAtF,EAAAC,cAAA,QAAM2F,SAAUb,GACZO,EAAAtF,EAAAC,cAAC4F,EAAA,YAAD,CAAaC,SAvCZ,SAACZ,GAClB7B,EAAY6B,EAAEa,OACd9C,EAASiC,EAAElC,MAAMkC,EAAElC,MAAMgD,QAAQ,OAsCjBV,EAAAtF,EAAAC,cAAA,OAAKC,UAAU,0BACXoF,EAAAtF,EAAAC,cAACgG,EAAAjG,EAAD,CACCkG,WACG,SAACC,GAAD,OACIb,EAAAtF,EAAAC,cAAA,2BAAmBkG,IAG3BC,aAAc,EACdD,MAAOjF,YAAeC,GACtBkF,YAAa,OACbC,mBAAmB,EACnBC,OAAQ,MAERjB,EAAAtF,EAAAC,cAAA,UAAQmD,SAAUR,GAAcQ,GAAYZ,GACxC8C,EAAAtF,EAAAC,cAAA,YAAO2C,EAAW0C,EAAAtF,EAAAC,cAAA,uBAAkB,aAG3C+C,GAASsC,EAAAtF,EAAAC,cAAA,WAAM+C","file":"static/js/8.1cf712aa.chunk.js","sourcesContent":["import React from 'react'\r\nimport './CheckoutProduct.css'\r\nimport {useDispatch} from 'react-redux'\r\nimport {  ShoppingCartOutlined } from '@mui/icons-material';\r\nimport { removeFromBasket } from '../../redux/actions';\r\n\r\nconst CheckoutProduct = ({id,title,image,rating,price}) => {\r\n  let dispatch=useDispatch();\r\n  const onremoveItemToBasket=()=>{\r\n   dispatch(removeFromBasket(id));\r\n  }\r\n    return (\r\n    <div className='checkout-product'>\r\n        <img src={image} alt='' className='checkout-product-image'/>\r\n        <div className=\"checkout-product-info\">\r\n            <p className=\"checkout-product-title\">\r\n                {title}\r\n            </p>\r\n            <p className=\"checkout-product-price\">\r\n                <strong>$</strong>\r\n                <strong>{price}</strong>\r\n            </p>\r\n            <div className=\"checkout-product-rating\">\r\n            {Array(rating).fill().map((_,index)=>(\r\n                <p key={index}><span role='img' aria-labelledby='' aria-label='star'>‚≠ê</span></p>\r\n                ))}\r\n            </div>\r\n            <button onClick={onremoveItemToBasket}>\r\n                <i>\r\n                    <ShoppingCartOutlined/>\r\n                </i>\r\n                 Remove from Basket\r\n            </button>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CheckoutProduct","export const getBasketTotal=(basket)=>\r\n  basket.reduce((amount,item)=>item.price + amount,0)","import axios from 'axios'\r\n\r\nconst instance= axios.create({\r\n    baseURL:'...',\r\n})\r\n\r\nexport default instance\r\n","import React,{useState,useEffect } from 'react'\r\nimport './Payment.css'\r\nimport { useSelector,useDispatch } from 'react-redux'\r\nimport CurrencyFormat from 'react-currency-format'\r\nimport { getBasketTotal } from '../../utils/BasketTotal'\r\nimport { Link, useNavigate } from 'react-router-dom'\r\nimport { db } from '../../utils/firebase'\r\nimport CheckoutProduct from '../../components/CheckoutProduct.js/CheckoutProduct'\r\nimport { CardElement,useStripe,useElements } from '@stripe/react-stripe-js'\r\nimport  axios  from '../../utils/axios' \r\n\r\n\r\n\r\nconst Payment = () => {\r\n    const {basket,user}=useSelector(state=>state.data)\r\n    const history=useNavigate();\r\n   \r\n   let dispatch=useDispatch();\r\n   const [succeeded,setSucceeded]=useState(false)\r\n   const [processing,setProcessing]=useState('')\r\n   const [error,setError]=useState(null)\r\n   const [disabled,setDisabled]=useState(true)\r\n   const [clientSecret,setClientSecret]=useState(true)\r\n\r\n   useEffect(()=>{\r\n       const getClientSecret=async()=>{\r\n           const response=await axios({\r\n               method:'POST',\r\n               url:`/payment/create?totla=${getBasketTotal(basket)*100}`,\r\n           })\r\n           setClientSecret(response.data.clientSecret)\r\n       }\r\n       getClientSecret();\r\n   },[basket])\r\n  const stripe=useStripe();\r\n  const elements=useElements();\r\n\r\n\r\n    const handleSubmit=async (e)=>{\r\n        e.preventDefault();\r\n        setProcessing(true)\r\n        setSucceeded(true)\r\n        setError(null)\r\n        setProcessing(false)\r\n        history('/orders')\r\n    }\r\n    const handleOnChange=(e)=>{\r\n        setDisabled(e.empty)\r\n        setError(e.error?e.error.message:'')\r\n    }\r\n  return (\r\n    <div className=\"payment\">\r\n        <div className=\"payment-container\">\r\n            <h1>Checkout {<Link to='/checkout'>{basket.length} items</Link>}</h1>\r\n            <div className=\"payment-section\">\r\n                <div className=\"payment-title\">\r\n                    <h3>Delivery Address</h3>\r\n                </div>\r\n                <div className=\"payment-address\">\r\n                    <p>{user && user.email}</p>\r\n                    <p>House No. 35334 Near Rose garden</p>\r\n                    <p>Ludhiana,Punjab,India</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"payment-section\">\r\n                <div className=\"payment-title\">\r\n                    <h3>Review Items for Delivery</h3>\r\n                </div>\r\n                <div className=\"payment-items\">\r\n                    {basket && basket.map((item)=>(\r\n                        <CheckoutProduct id={item.id}\r\n                        title={item.title}\r\n                        image={item.img}\r\n                        price={item.price}\r\n                        rating={item.rating}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className=\"payment-section\">\r\n                <div className=\"payment-title\">\r\n                    <h3>Payment-method</h3>\r\n                </div>\r\n                <div className=\"payment-details\">\r\n                    <form onSubmit={handleSubmit}>\r\n                        <CardElement onChange={handleOnChange}/>\r\n                        <div className='payment-priceContainer'>\r\n                            <CurrencyFormat\r\n                             renderText={\r\n                                (value)=>(\r\n                                    <h3>Order Total : {value}</h3>\r\n                                )\r\n                            }\r\n                            decimalScale={2}\r\n                            value={getBasketTotal(basket)}\r\n                            displayType={'text'}\r\n                            thousandSeparator={true}\r\n                            prefix={'$'}\r\n                            />\r\n                            <button disabled={processing || disabled || succeeded}>\r\n                                <span>{processing?<p>Processing</p>:\"Buy Now\"}</span>\r\n                            </button>\r\n                        </div>\r\n                        {error && <div>{error}</div>}\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Payment"],"sourceRoot":""}